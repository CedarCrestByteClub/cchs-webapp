<!DOCTYPE HTML>
<html>
	<head>
		<script src="http://www.parsecdn.com/js/parse-1.6.2.min.js"></script>
		<script type="text/javascript">Parse.initialize("1nbCZcm4WHUpYs0C89oTo231mhcpL2LRa5KfsYtw", "nNWuXfGI2ujbWBzxd5Om3F3OgFIIZRfvonOxfdEc");</script>
		<script src="js/jquery-2.1.4.min.js"></script>
	</head>
	
	<body>
		<iframe id="frame" src="test.html" style="height:100%;min-height:100%;width:100%;"></iframe>
		
		<script>
			var frame = document.getElementById("frame");
			frame.style.height = window.innerHeight + "px";
			function load(src) {
				console.log(src);
				var url = src;
				//this._model = "moodle.py";
				//var x = this._model.call('load',[src]).done(function(results){});
				//var test = new instance.web.Model("moodle.py").get_func("load")(url);
				$.ajax({
				  type: "POST",
				  url: "moodle.py",
				  //data: { param: url},
				  dataType:"text"
				}).done(function(code) {
				});
				//jQuery.get('moodle.py', function(data) {
				    //do stuff with the data
				//});
				//var xhr = new XMLHttpRequest();
				//xhr.open("GET", "moodle.py?url=" + url, true);
				//xhr.responseType = "JSON";
				//xhr.onload = function(e) {
				  //var arrOfStrings = JSON.parse(xhr.response);
				//};
				//xhr.send();
				var pClass = Parse.Object.extend("MoodleLinks");
				var query = new Parse.Query(pClass);
				query.equalTo("userid", "000001");
				query.first({
					success: function(result) {
						console.log(result);
						frame.src = result;
					}
				});
			}
		</script>
	</body>
</html>